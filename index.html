<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Reels Editor (WebM VP8)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;}

body{
margin:0;
padding:12px;
display:flex;
gap:16px;
background:#020617;
color:#e5e7eb;
font-family:system-ui;
}

.panel{
background:#020617;
padding:16px;
border-radius:14px;
border:1px solid #1f2937;
}

.left{
width:380px;
}

.right{
flex:1;
display:flex;
justify-content:center;
align-items:center;
}

textarea{
width:100%;
margin-bottom:10px;
background:#020617;
color:white;
border:1px solid #334155;
padding:8px;
border-radius:8px;
}

button{
padding:10px 16px;
border-radius:999px;
border:none;
cursor:pointer;
margin-right:6px;
}

.preview{
background:#111827;
color:white;
}

.render{
background:#2563eb;
color:white;
}

.status{
margin-top:10px;
font-size:13px;
color:#9ca3af;
}

canvas{
background:#808080;
border-radius:18px;
border:1px solid #4b5563;
max-height:90vh;
}
</style>
</head>

<body>

<div class="panel left">

Upper
<textarea id="upper"></textarea>

Judul
<textarea id="title"></textarea>

Subjudul
<textarea id="subtitle"></textarea>

Isi
<textarea id="body"></textarea>

<button class="preview" id="previewBtn">
Preview
</button>

<button class="render" id="renderBtn">
Render WebM (VP8)
</button>

<div class="status" id="status">
Status: idle
</div>

</div>

<div class="panel right">
<canvas id="canvas"></canvas>
</div>

<script>

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

const previewBtn=document.getElementById("previewBtn");
const renderBtn=document.getElementById("renderBtn");
const statusEl=document.getElementById("status");

const WIDTH=1080;
const HEIGHT=1920;
const SCALE=1.5;

canvas.width=WIDTH*SCALE;
canvas.height=HEIGHT*SCALE;

ctx.scale(SCALE,SCALE);

let animating=false;
let animStart=null;

let duration=8;

function setStatus(text){

statusEl.textContent="Status: "+text;

}

function drawFrame(t){

ctx.fillStyle="#808080";
ctx.fillRect(0,0,WIDTH,HEIGHT);

ctx.fillStyle="#ffffff";

ctx.font="bold 80px sans-serif";

ctx.fillText("REELS PREVIEW",110,900);

ctx.font="40px sans-serif";

ctx.fillText("time: "+t.toFixed(2),110,1000);

}

function animate(ts){

if(!animating)return;

if(!animStart)animStart=ts;

const elapsed=(ts-animStart)/1000;

drawFrame(elapsed);

if(elapsed<duration){

requestAnimationFrame(animate);

}else{

animating=false;

setStatus("idle");

}

}

previewBtn.onclick=()=>{

setStatus("preview running");

animStart=null;

animating=true;

requestAnimationFrame(animate);

};

renderBtn.onclick=()=>{

setStatus("recording");

const stream=canvas.captureStream(30);

const recorder=new MediaRecorder(stream,{
mimeType:"video/webm;codecs=vp8",
videoBitsPerSecond:8000000
});

let chunks=[];

recorder.ondataavailable=e=>{

if(e.data.size>0){

chunks.push(e.data);

}

};

recorder.onstop=()=>{

setStatus("encoding");

const blob=new Blob(chunks,{
type:"video/webm"
});

const url=URL.createObjectURL(blob);

const a=document.createElement("a");

a.href=url;

a.download="reels.webm";

document.body.appendChild(a);

a.click();

a.remove();

URL.revokeObjectURL(url);

setStatus("done");

};

recorder.start(100);

animStart=null;

animating=true;

requestAnimationFrame(animate);

setTimeout(()=>{

recorder.stop();

},duration*1000);

};

drawFrame(0);

</script>

</body>
</html>
